{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\danielol\\\\Desktop\\\\AJ7\\\\comissoes_financiamento\\\\frontend\\\\src\\\\pages\\\\SalesPage.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/pages/SalesPage.jsx\nimport React, { useEffect, useState } from 'react';\nimport SalesList from '../sections/SalesList';\nimport { getUserInfo } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SalesPage() {\n  _s();\n  const user = getUserInfo();\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n  const [refreshKey, setRefreshKey] = useState(0);\n  function openNewSale() {\n    const largura = 1000;\n    const altura = 700;\n    const esquerda = Math.max(0, Math.round((window.screen.width - largura) / 2));\n    const topo = Math.max(0, Math.round((window.screen.height - altura) / 2));\n    const features = [`width=${largura}`, `height=${altura}`, `left=${esquerda}`, `top=${topo}`, 'menubar=no', 'toolbar=no', 'location=no', 'status=no', 'scrollbars=yes', 'resizable=yes'].join(',');\n    const win = window.open('/sales/new', 'AJ7NovaVenda', features);\n    if (!win) {\n      // fallback para abrir na mesma aba\n      window.location.href = '/sales/new';\n    }\n  }\n\n  // Atualiza lista quando a janela de cadastro sinalizar\n  useEffect(() => {\n    function onStorage(e) {\n      if (e.key === 'sales_refresh') {\n        setRefreshKey(k => k + 1);\n      }\n    }\n    window.addEventListener('storage', onStorage);\n    return () => window.removeEventListener('storage', onStorage);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(SalesList, {}, refreshKey, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(SalesPage, \"URqI0iCTtJPArFfWptlzhmKSLEg=\");\n_c = SalesPage;\nvar _c;\n$RefreshReg$(_c, \"SalesPage\");","map":{"version":3,"names":["React","useEffect","useState","SalesList","getUserInfo","jsxDEV","_jsxDEV","SalesPage","_s","user","isAdmin","role","refreshKey","setRefreshKey","openNewSale","largura","altura","esquerda","Math","max","round","window","screen","width","topo","height","features","join","win","open","location","href","onStorage","e","key","k","addEventListener","removeEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/danielol/Desktop/AJ7/comissoes_financiamento/frontend/src/pages/SalesPage.jsx"],"sourcesContent":["// frontend/src/pages/SalesPage.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport SalesList from '../sections/SalesList';\r\nimport { getUserInfo } from '../api';\r\n\r\nexport default function SalesPage() {\r\n  const user = getUserInfo();\r\n  const isAdmin = user?.role === 'admin';\r\n\r\n  const [refreshKey, setRefreshKey] = useState(0);\r\n\r\n  function openNewSale() {\r\n    const largura = 1000;\r\n    const altura = 700;\r\n    const esquerda = Math.max(0, Math.round((window.screen.width - largura) / 2));\r\n    const topo = Math.max(0, Math.round((window.screen.height - altura) / 2));\r\n    const features = [\r\n      `width=${largura}`,\r\n      `height=${altura}`,\r\n      `left=${esquerda}`,\r\n      `top=${topo}`,\r\n      'menubar=no',\r\n      'toolbar=no',\r\n      'location=no',\r\n      'status=no',\r\n      'scrollbars=yes',\r\n      'resizable=yes'\r\n    ].join(',');\r\n\r\n    const win = window.open('/sales/new', 'AJ7NovaVenda', features);\r\n    if (!win) {\r\n      // fallback para abrir na mesma aba\r\n      window.location.href = '/sales/new';\r\n    }\r\n  }\r\n\r\n  // Atualiza lista quando a janela de cadastro sinalizar\r\n  useEffect(() => {\r\n    function onStorage(e) {\r\n      if (e.key === 'sales_refresh') {\r\n        setRefreshKey(k => k + 1);\r\n      }\r\n    }\r\n    window.addEventListener('storage', onStorage);\r\n    return () => window.removeEventListener('storage', onStorage);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {/*<div className=\"d-flex align-items-center mb-3\">\r\n        <h4 className=\"m-0\">Vendas</h4>\r\n        <div className=\"ms-auto\">\r\n          <button className=\"btn btn-primary\" onClick={openNewSale}>\r\n            Nova venda\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      \r\n      <hr className=\"mb-3\" />*/}\r\n\r\n      <SalesList key={refreshKey} />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,SAAS,MAAM,uBAAuB;AAC7C,SAASC,WAAW,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErC,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAMC,IAAI,GAAGL,WAAW,CAAC,CAAC;EAC1B,MAAMM,OAAO,GAAG,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI,MAAK,OAAO;EAEtC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC;EAE/C,SAASY,WAAWA,CAAA,EAAG;IACrB,MAAMC,OAAO,GAAG,IAAI;IACpB,MAAMC,MAAM,GAAG,GAAG;IAClB,MAAMC,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAC,CAACC,MAAM,CAACC,MAAM,CAACC,KAAK,GAAGR,OAAO,IAAI,CAAC,CAAC,CAAC;IAC7E,MAAMS,IAAI,GAAGN,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAC,CAACC,MAAM,CAACC,MAAM,CAACG,MAAM,GAAGT,MAAM,IAAI,CAAC,CAAC,CAAC;IACzE,MAAMU,QAAQ,GAAG,CACf,SAASX,OAAO,EAAE,EAClB,UAAUC,MAAM,EAAE,EAClB,QAAQC,QAAQ,EAAE,EAClB,OAAOO,IAAI,EAAE,EACb,YAAY,EACZ,YAAY,EACZ,aAAa,EACb,WAAW,EACX,gBAAgB,EAChB,eAAe,CAChB,CAACG,IAAI,CAAC,GAAG,CAAC;IAEX,MAAMC,GAAG,GAAGP,MAAM,CAACQ,IAAI,CAAC,YAAY,EAAE,cAAc,EAAEH,QAAQ,CAAC;IAC/D,IAAI,CAACE,GAAG,EAAE;MACR;MACAP,MAAM,CAACS,QAAQ,CAACC,IAAI,GAAG,YAAY;IACrC;EACF;;EAEA;EACA9B,SAAS,CAAC,MAAM;IACd,SAAS+B,SAASA,CAACC,CAAC,EAAE;MACpB,IAAIA,CAAC,CAACC,GAAG,KAAK,eAAe,EAAE;QAC7BrB,aAAa,CAACsB,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC;MAC3B;IACF;IACAd,MAAM,CAACe,gBAAgB,CAAC,SAAS,EAAEJ,SAAS,CAAC;IAC7C,OAAO,MAAMX,MAAM,CAACgB,mBAAmB,CAAC,SAAS,EAAEL,SAAS,CAAC;EAC/D,CAAC,EAAE,EAAE,CAAC;EAEN,oBACE1B,OAAA;IAAAgC,QAAA,eAaEhC,OAAA,CAACH,SAAS,MAAMS,UAAU;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC3B,CAAC;AAEV;AAAClC,EAAA,CA3DuBD,SAAS;AAAAoC,EAAA,GAATpC,SAAS;AAAA,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}